syntax = "proto3";
package tests.oneof;

message Message {
  int32 value = 1;
  string str = 2;
}

enum Enum {
  UNSPECIFIED = 0;
  SOMETHING = 1;
  SOMETHING2 = 2;
}

message OneofContainer {
  oneof some_oneof {
    string string_in_oneof = 1;
    Message message_in_oneof = 2;
    int32 a_number = 3;
    Enum enum_value = 6;
  }
  string regular_field = 4;
  Enum enum_field = 5;
}

message S3LockResult {
    oneof error { // this does not compile if not escaped
        Success success = 1;
        NotOwner not_owner = 2;
        Conflict conflict = 3;
    }
}
message Success {}
// Error caused by S3GC owner changed
// client should retry
message NotOwner{
}
// Error caused by concurrency conflict,
// request cancel
message Conflict {
    string reason = 1;
}